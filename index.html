<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drink Tracker - Register Water Bottles, Glasses & Beers</title>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>');
            pointer-events: none;
            z-index: 0;
        }

        body > * {
            position: relative;
            z-index: 1;
        }

        .auth-container {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .auth-card {
            background: white;
            border-radius: 20px;
            padding: 50px 40px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 420px;
            animation: slideInDown 0.6s ease-out;
            border: 2px solid rgba(102, 126, 234, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .auth-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(135deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        .auth-card h1 {
            color: #667eea;
            margin-bottom: 10px;
            text-align: center;
            font-size: 2.3em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
        }

        .auth-card p {
            text-align: center;
            color: #999;
            margin-bottom: 35px;
            font-size: 1.05em;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e8e8f0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #f8f9fc;
            position: relative;
            z-index: 1;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .auth-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            position: relative;
            z-index: 1;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .auth-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: -1;
        }

        .auth-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .auth-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.5);
        }

        .toggle-form {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .toggle-form button {
            background: none;
            border: none;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            text-decoration: underline;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: none;
        }

        .hidden {
            display: none !important;
        }

        /* Mobile & Tablet Responsive Styles */
        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .profile-section {
                padding: 25px 20px;
                margin-bottom: 20px;
            }

            .profile-avatar {
                width: 100px;
                height: 100px;
                font-size: 2.5em;
            }

            .profile-name {
                font-size: 1.5em;
            }

            .profile-email {
                font-size: 0.9em;
            }

            .profile-modal-content {
                padding: 30px 20px;
                border-radius: 14px;
            }

            .profile-modal h2 {
                font-size: 1.4em;
                margin-bottom: 20px;
            }

            .modal-buttons {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .profile-section {
                padding: 20px;
            }

            .profile-avatar {
                width: 90px;
                height: 90px;
                font-size: 2em;
                margin-bottom: 15px;
            }

            .profile-name {
                font-size: 1.3em;
                margin-bottom: 6px;
            }

            .profile-modal-content {
                padding: 25px 18px;
                border-radius: 12px;
            }

            .profile-modal h2 {
                font-size: 1.3em;
                margin-bottom: 18px;
            }

            .profile-preview {
                width: 80px;
                height: 80px;
                font-size: 2em;
            }
        }

            .auth-container {
                padding: 16px;
            }

            .auth-card {
                padding: 35px 25px;
                border-radius: 16px;
                max-width: 100%;
            }

            .auth-card h1 {
                font-size: 2em;
                margin-bottom: 8px;
            }

            .auth-card p {
                margin-bottom: 28px;
                font-size: 0.95em;
            }

            .form-group label {
                font-size: 0.9em;
            }

            .form-group input {
                padding: 13px 14px;
                font-size: 16px;
                border-radius: 8px;
            }

            .auth-button {
                padding: 13px;
                font-size: 1em;
                margin-top: 12px;
                border-radius: 8px;
            }

            .toggle-form {
                margin-top: 18px;
                font-size: 0.9em;
            }

            .app-container {
                max-width: 100%;
            }

            .app-header {
                margin-bottom: 25px;
                gap: 12px;
            }

            .app-header h1 {
                font-size: 1.8em;
            }

            .app-header p {
                font-size: 0.9em;
            }

            .user-info {
                padding: 14px 16px;
                font-size: 0.85em;
                gap: 10px;
            }

            .user-email {
                font-size: 0.9em;
            }

            .logout-button {
                padding: 8px 16px;
                font-size: 0.85em;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 12px;
                margin-bottom: 20px;
            }

            .stat-card {
                padding: 22px 16px;
            }

            .stat-number {
                font-size: 2.5em;
            }

            .stat-label {
                font-size: 0.9em;
                margin-top: 8px;
            }

            .content {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }

            .card {
                padding: 25px 20px;
                border-radius: 14px;
            }

            .card h2 {
                font-size: 1.4em;
                margin-bottom: 18px;
            }

            .form-group {
                margin-bottom: 16px;
            }

            .button-group {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            button {
                padding: 14px 16px;
                font-size: 0.95em;
                border-radius: 8px;
                min-height: 48px;
            }

            .items-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .item {
                padding: 16px;
                border-left-width: 4px;
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .item-info {
                width: 100%;
            }

            .item-type {
                font-size: 1em;
            }

            .item-details {
                font-size: 0.85em;
            }

            .item-delete {
                width: 100%;
                padding: 10px 12px;
                font-size: 0.9em;
                margin-left: 0;
            }

            .empty-message {
                padding: 30px 16px;
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .auth-card {
                padding: 28px 20px;
                border-radius: 14px;
            }

            .auth-card h1 {
                font-size: 1.7em;
            }

            .form-group input {
                padding: 12px 12px;
                font-size: 16px;
            }

            .app-header {
                flex-direction: column;
                align-items: flex-start;
                margin-bottom: 20px;
            }

            .app-header h1 {
                font-size: 1.5em;
                margin-bottom: 6px;
            }

            .user-info {
                width: 100%;
                padding: 12px 14px;
                font-size: 0.8em;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 10px;
                margin-bottom: 16px;
            }

            .stat-card {
                padding: 18px 14px;
            }

            .stat-number {
                font-size: 2.2em;
            }

            .card {
                padding: 20px 16px;
                border-radius: 12px;
            }

            .card h2 {
                font-size: 1.25em;
                margin-bottom: 16px;
            }

            .form-group {
                margin-bottom: 14px;
            }

            label {
                font-size: 0.9em;
                margin-bottom: 8px;
            }

            .button-group {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            button {
                padding: 12px 14px;
                font-size: 0.9em;
                min-height: 44px;
            }

            .items-container {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .item {
                padding: 14px;
                border-left-width: 4px;
            }

            .item-delete {
                width: 100%;
                padding: 9px 10px;
                font-size: 0.85em;
            }

            .error-message,
            .success-message {
                padding: 10px;
                font-size: 0.9em;
            }

            .toggle-form {
                font-size: 0.85em;
            }
        }

        @media (max-height: 700px) and (orientation: landscape) {
            .auth-card {
                padding: 30px 25px;
            }

            .form-group {
                margin-bottom: 12px;
            }

            button {
                padding: 10px 14px;
                font-size: 0.9em;
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @supports (gap: clamp(1rem, 5vw, 2rem)) {
            .content {
                gap: clamp(20px, 5vw, 30px);
            }
        }

        .card {
            background: white;
            border-radius: 18px;
            padding: 35px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            animation: fadeIn 0.6s ease-out;
            border: 1px solid rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }

        .card h2 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            font-size: 1.65em;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
            font-size: 0.95em;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
        }

        button {
            padding: 13px 22px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .modal-buttons button:before {
            z-index: -1;
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-water-bottle {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-water-bottle:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.5);
        }

        .btn-water-glass {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-water-glass:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.5);
        }

        .btn-beer {
            background: linear-gradient(135deg, #f39c12, #d68910);
            color: white;
        }

        .btn-beer:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(243, 156, 18, 0.5);
        }

        .items-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        @supports (gap: clamp(1rem, 3vw, 1.5rem)) {
            .items-container {
                gap: clamp(10px, 3vw, 15px);
            }
        }

        .item {
            background: white;
            border-left: 5px solid #667eea;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            animation: fadeIn 0.5s ease-out;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .item:hover {
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
            transform: translateX(8px) translateY(-3px);
        }

        .item.water-bottle {
            border-left-color: #3498db;
            background: linear-gradient(135deg, #ecf4ff 0%, white 100%);
        }

        .item.water-bottle:hover {
            box-shadow: 0 12px 35px rgba(52, 152, 219, 0.2);
        }

        .item.water-glass {
            border-left-color: #2ecc71;
            background: linear-gradient(135deg, #eefff5 0%, white 100%);
        }

        .item.water-glass:hover {
            box-shadow: 0 12px 35px rgba(46, 204, 113, 0.2);
        }

        .item.beer {
            border-left-color: #f39c12;
            background: linear-gradient(135deg, #fff5e6 0%, white 100%);
        }

        .item.beer:hover {
            box-shadow: 0 12px 35px rgba(243, 156, 18, 0.2);
        }

        .item-info {
            flex: 1;
        }

        .item-type {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        .item-details {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .item-delete {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            margin-left: 10px;
        }

        .item-delete:hover {
            background-color: #c0392b;
        }

        .empty-message {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-size: 1.1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        @supports (gap: clamp(1rem, 3vw, 1.5rem)) {
            .stats {
                gap: clamp(12px, 3vw, 15px);
            }
        }

        .stat-card {
            background: white;
            padding: 30px 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            animation: fadeIn 0.6s ease-out;
            transition: all 0.3s ease;
            border-top: 5px solid;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.5), transparent);
            pointer-events: none;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 3.2em;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            color: #666;
            font-size: 1em;
            margin-top: 12px;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .stat-card.bottles {
            border-top-color: #3498db;
            background: linear-gradient(135deg, #ecf4ff 0%, white 100%);
        }

        .stat-card.glasses {
            border-top-color: #2ecc71;
            background: linear-gradient(135deg, #eefff5 0%, white 100%);
        }

        .stat-card.beers {
            border-top-color: #f39c12;
            background: linear-gradient(135deg, #fff5e6 0%, white 100%);
        }

        /* App Container Styles */
        .app-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0;
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
            animation: slideInDown 0.6s ease-out;
        }

        .app-header h1 {
            font-size: 2.8em;
            color: white;
            font-weight: 800;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .app-header p {
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }

        .user-info {
            background: rgba(255, 255, 255, 0.15);
            padding: 18px 25px;
            border-radius: 12px;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .user-email {
            font-weight: 600;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            border: 2px solid rgba(255, 255, 255, 0.5);
            object-fit: cover;
        }

        .profile-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease-out;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin-bottom: 20px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            object-fit: cover;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .profile-name {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .profile-email {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .edit-profile-button {
            background: white;
            color: #667eea;
            padding: 10px 25px;
            border-radius: 8px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .edit-profile-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .profile-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .profile-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .profile-modal-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideInDown 0.3s ease-out;
        }

        .profile-modal h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 1.6em;
        }

        .profile-modal .form-group {
            margin-bottom: 18px;
        }

        .profile-modal label {
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .profile-modal input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e8e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .profile-modal input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .file-input-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border: 2px dashed #667eea;
            border-radius: 8px;
            background: #f8f9fc;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .file-input-label:hover {
            background: #f0f2ff;
            border-color: #764ba2;
        }

        .file-input-label input {
            display: none;
        }

        .profile-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            margin: 15px auto;
            border: 3px solid #667eea;
            object-fit: cover;
        }

        .modal-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 25px;
        }

        .modal-buttons button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-profile {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .save-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .cancel-modal {
            background: #e8e8f0;
            color: #333;
        }

        .cancel-modal:hover {
            background: #d8d8e0;
            transform: translateY(-3px);
        }

        .logout-button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .logout-button:hover {
            background: #c0392b;
        }

        .music-toggle {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .music-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .music-toggle.playing {
            background: rgba(76, 175, 80, 0.5);
            border-color: rgba(76, 175, 80, 0.8);
        }

        .music-toggle.playing:hover {
            background: rgba(76, 175, 80, 0.7);
        }

        .music-toggle {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .music-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .music-toggle.playing {
            background: rgba(76, 175, 80, 0.5);
            border-color: rgba(76, 175, 80, 0.8);
        }

        .music-toggle.playing:hover {
            background: rgba(76, 175, 80, 0.7);
        }

        .language-selector {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.85em;
        }

        .language-selector:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 100;
            min-width: 150px;
            display: none;
            margin-top: 8px;
        }

        .language-dropdown.active {
            display: block;
            animation: slideInDown 0.3s ease-out;
        }

        .language-dropdown button {
            width: 100%;
            padding: 12px 16px;
            background: white;
            color: #333;
            border: none;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.95em;
            font-weight: 500;
        }

        .language-dropdown button:first-child {
            border-radius: 6px 6px 0 0;
        }

        .language-dropdown button:last-child {
            border-radius: 0 0 6px 6px;
        }

        .language-dropdown button:hover {
            background: #f0f2ff;
            color: #667eea;
        }

        .language-dropdown button.active {
            background: #667eea;
            color: white;
        }

        .achievements-section {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease-out;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.3);
        }

        .achievements-title {
            font-size: 1.6em;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .trophies-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .trophy-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .trophy-item.earned {
            animation: pulse 0.6s ease-out;
            background: linear-gradient(135deg, #ffffff 0%, #fffacd 100%);
            border: 2px solid #ffd700;
        }

        .trophy-item.locked {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .trophy-emoji {
            font-size: 3.5em;
            margin-bottom: 10px;
        }

        .trophy-name {
            font-weight: 700;
            color: #333;
            text-align: center;
            font-size: 0.95em;
            margin-bottom: 8px;
        }

        .trophy-progress {
            font-size: 0.85em;
            color: #666;
            text-align: center;
        }

        .achievement-message {
            text-align: center;
            color: #333;
            font-size: 1.1em;
            font-weight: 600;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-top: 20px;
        }

        .no-achievements {
            text-align: center;
            color: #666;
            font-size: 1.05em;
            padding: 20px;
        }

        .trophy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            animation: slideInDown 0.5s ease-out, fadeOut 0.5s ease-out 2.5s forwards;
            z-index: 2000;
            font-weight: 700;
            color: #333;
            max-width: 300px;
            text-align: center;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }
    </style>
</head>
<body>
    <!-- Login/Register Section -->
    <div id="authSection" class="auth-container">
        <div class="auth-card">
            <div id="loginForm">
                <h1>ü•§ Login</h1>
                <p>Drink Tracker</p>
                <div class="error-message" id="loginError"></div>
                <div class="form-group">
                    <label for="loginEmail" data-i18n="email">Email:</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com" required data-i18n="email">
                </div>
                <div class="form-group">
                    <label for="loginPassword" data-i18n="password">Password:</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required data-i18n="password">
                </div>
                <button class="auth-button" onclick="handleLogin()" data-i18n="loginSubmit">Login</button>
                <div class="toggle-form">
                    <span data-i18n="dontHaveAccount">Don't have an account?</span> <button onclick="toggleForms()">Register</button>
                </div>
            </div>

            <div id="registerForm" class="hidden">
                <h1>ü•§ Register</h1>
                <p>Drink Tracker</p>
                <div class="error-message" id="registerError"></div>
                <div class="success-message" id="registerSuccess"></div>
                <div class="form-group">
                    <label for="registerEmail" data-i18n="email">Email:</label>
                    <input type="email" id="registerEmail" placeholder="your@email.com" required data-i18n="email">
                </div>
                <div class="form-group">
                    <label for="registerPassword" data-i18n="password">Password:</label>
                    <input type="password" id="registerPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required data-i18n="password">
                </div>
                <div class="form-group">
                    <label for="registerConfirm" data-i18n="confirmPassword">Confirm Password:</label>
                    <input type="password" id="registerConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required data-i18n="confirmPassword">
                </div>
                <button class="auth-button" onclick="handleRegister()" data-i18n="registerSubmit">Register</button>
                <div class="toggle-form">
                    <span data-i18n="haveAccount">Already have an account?</span> <button onclick="toggleForms()">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- App Section -->
    <div id="appSection" class="hidden">
        <div class="app-container">
            <div class="app-header">
                <div>
                    <h1>ü•§ Drink Tracker</h1>
                    <p style="color: white; opacity: 0.9;">Register and track your water bottles, glasses, and beers</p>
                </div>
                <div class="user-info">
                    <img id="headerAvatar" class="user-avatar" src="" alt="Avatar">
                    <div>
                        <div style="font-size: 0.8em; opacity: 0.9;">Logged in as:</div>
                        <div class="user-email" id="currentUserEmail"></div>
                    </div>
                </div>
                <button class="music-toggle" id="musicToggle" onclick="toggleMusic()" title="Toggle background music">üéµ Music</button>
                <div style="position: relative;">
                    <button class="language-selector" onclick="toggleLanguageDropdown()" title="Select language">üåê Language</button>
                    <div class="language-dropdown" id="languageDropdown"></div>
                </div>
                <button class="logout-button" onclick="handleLogout()">Logout</button>
            </div>

            <div class="profile-section">
                <img id="profileAvatar" class="profile-avatar" src="" alt="Profile Avatar">
                <div class="profile-name" id="profileName">User</div>
                <div class="profile-email" id="profileUserEmail">user@email.com</div>
                <button class="edit-profile-button" onclick="openProfileModal()">Edit Profile</button>
            </div>

            <div id="achievementsSection" class="achievements-section">
                <div class="achievements-title">üèÜ Your Trophies</div>
                <div id="trophiesContainer" class="trophies-container"></div>
            </div>

            <div class="stats">
                <div class="stat-card bottles">
                    <div class="stat-number" id="bottleCount">0</div>
                    <div class="stat-label" data-i18n="waterBottles">Water Bottles</div>
                </div>
                <div class="stat-card glasses">
                    <div class="stat-number" id="glassCount">0</div>
                    <div class="stat-label" data-i18n="waterGlasses">Water Glasses</div>
                </div>
                <div class="stat-card beers">
                    <div class="stat-number" id="beerCount">0</div>
                    <div class="stat-label" data-i18n="beers">Beers</div>
                </div>
            </div>

            <div class="content">
        <header>
            <h1>ü•§ Drink Tracker</h1>
            <p>Register and track your water bottles, glasses, and beers</p>
        </header>

        <div class="stats">
            <div class="stat-card bottles">
                <div class="stat-number" id="bottleCount">0</div>
                <div class="stat-label">Water Bottles</div>
            </div>
            <div class="stat-card glasses">
                <div class="stat-number" id="glassCount">0</div>
                <div class="stat-label">Water Glasses</div>
            </div>
            <div class="stat-card beers">
                <div class="stat-number" id="beerCount">0</div>
                <div class="stat-label">Beers</div>
            </div>
        </div>

        <div class="content">
            <div class="content">
                <div class="card">
                    <h2 data-i18n="registerDrink">üìù Register Drink</h2>
                    <div class="form-group">
                        <label for="drinkName" data-i18n="nameDescription">Name/Description:</label>
                        <input type="text" id="drinkName" placeholder="e.g., My Bottle, Morning Glass" required data-i18n="nameDescription">
                    </div>
                    <div class="form-group">
                        <label for="drinkVolume" data-i18n="volume">Volume (ml):</label>
                        <input type="number" id="drinkVolume" placeholder="e.g., 500" min="1" data-i18n="volume">
                    </div>
                    <div class="form-group">
                        <label for="drinkTime" data-i18n="time">Time:</label>
                        <input type="text" id="drinkTime" placeholder="e.g., 09:30 AM" value="" data-i18n="time">
                    </div>
                    <div class="button-group">
                        <button class="btn-water-bottle" onclick="addDrink('water-bottle')" data-i18n="bottle">üíß Bottle</button>
                        <button class="btn-water-glass" onclick="addDrink('water-glass')" data-i18n="glass">ü•õ Glass</button>
                        <button class="btn-beer" onclick="addDrink('beer')" data-i18n="beer">üç∫ Beer</button>
                    </div>
                </div>

                <div class="card">
                    <h2 data-i18n="options">‚öôÔ∏è Options</h2>
                    <button style="width: 100%; background-color: #e74c3c; color: white; margin-bottom: 10px; padding: 12px;" onclick="clearAll()" data-i18n="clearAllItems">Clear All Items</button>
                    <button style="width: 100%; background-color: #95a5a6; color: white; padding: 12px;" onclick="downloadData()" data-i18n="downloadData">Download Data</button>
                    <div style="margin-top: 20px; padding: 15px; background: #ecf0f1; border-radius: 6px; font-size: 0.9em; color: #555;">
                        <strong data-i18n="autoSave">üíæ Auto-save:</strong> <span data-i18n="autoSaveDesc">All items are automatically saved to your account.</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 data-i18n="registeredItems">üìã Registered Items</h2>
                <div class="items-container" id="itemsList">
                    <div class="empty-message" data-i18n="noItems">No items registered yet. Start by adding a drink above!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <!-- Profile Modal -->
    <div id="profileModal" class="profile-modal">
        <div class="profile-modal-content">
            <h2 data-i18n="editYourProfile">Edit Your Profile</h2>
            <div class="form-group">
                <label data-i18n="profilePicture">Profile Picture</label>
                <label class="file-input-label">
                    <span data-i18n="clickToUpload">üì∏ Click to upload or drag & drop</span>
                    <input type="file" id="profilePictureInput" accept="image/*">
                </label>
                <img id="profilePreview" class="profile-preview" src="" alt="Preview">
            </div>
            <div class="form-group">
                <label for="profileNameInput" data-i18n="name">Name:</label>
                <input type="text" id="profileNameInput" placeholder="Enter your name" maxlength="30" data-i18n="name">
            </div>
            <div class="modal-buttons">
                <button class="save-profile" onclick="saveProfile()" data-i18n="saveChanges">Save Changes</button>
                <button class="cancel-modal" onclick="closeProfileModal()" data-i18n="cancel">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // ========== LANGUAGE TRANSLATIONS ==========
        const translations = {
            en: {
                login: 'Login',
                register: 'Register',
                email: 'Email',
                password: 'Password',
                confirmPassword: 'Confirm Password',
                loginSubmit: 'Login',
                registerSubmit: 'Register',
                dontHaveAccount: "Don't have an account?",
                haveAccount: 'Already have an account?',
                drinkTracker: 'Drink Tracker',
                subtitle: 'Register and track your water bottles, glasses, and beers',
                loggedInAs: 'Logged in as:',
                logout: 'Logout',
                yourTrophies: 'Your Trophies',
                waterBottles: 'Water Bottles',
                waterGlasses: 'Water Glasses',
                beers: 'Beers',
                registerDrink: 'Register Drink',
                nameDescription: 'Name/Description:',
                volume: 'Volume (ml):',
                time: 'Time:',
                bottle: 'Bottle',
                glass: 'Glass',
                beer: 'Beer',
                options: 'Options',
                clearAllItems: 'Clear All Items',
                downloadData: 'Download Data',
                autoSave: 'Auto-save',
                autoSaveDesc: 'All items are automatically saved to your account.',
                registeredItems: 'Registered Items',
                noItems: 'No items registered yet. Start by adding a drink above!',
                editProfile: 'Edit Profile',
                editYourProfile: 'Edit Your Profile',
                profilePicture: 'Profile Picture',
                clickToUpload: 'Click to upload or drag & drop',
                name: 'Name:',
                saveChanges: 'Save Changes',
                cancel: 'Cancel',
                delete: 'Delete',
                startRecording: 'Start recording drinks to earn trophies!'
            },
            es: {
                login: 'Iniciar sesi√≥n',
                register: 'Registrarse',
                email: 'Correo electr√≥nico',
                password: 'Contrase√±a',
                confirmPassword: 'Confirmar Contrase√±a',
                loginSubmit: 'Iniciar sesi√≥n',
                registerSubmit: 'Registrarse',
                dontHaveAccount: '¬øNo tienes una cuenta?',
                haveAccount: '¬øYa tienes una cuenta?',
                drinkTracker: 'Rastreador de Bebidas',
                subtitle: 'Registra y controla tus botellas de agua, vasos y cervezas',
                loggedInAs: 'Iniciaste sesi√≥n como:',
                logout: 'Cerrar sesi√≥n',
                yourTrophies: 'Tus Trofeos',
                waterBottles: 'Botellas de Agua',
                waterGlasses: 'Vasos de Agua',
                beers: 'Cervezas',
                registerDrink: 'Registrar Bebida',
                nameDescription: 'Nombre/Descripci√≥n:',
                volume: 'Volumen (ml):',
                time: 'Hora:',
                bottle: 'Botella',
                glass: 'Vaso',
                beer: 'Cerveza',
                options: 'Opciones',
                clearAllItems: 'Eliminar Todos los Elementos',
                downloadData: 'Descargar Datos',
                autoSave: 'Guardado autom√°tico',
                autoSaveDesc: 'Todos los elementos se guardan autom√°ticamente en tu cuenta.',
                registeredItems: 'Elementos Registrados',
                noItems: '¬°A√∫n no hay elementos registrados. ¬°Comienza agregando una bebida arriba!',
                editProfile: 'Editar Perfil',
                editYourProfile: 'Edita Tu Perfil',
                profilePicture: 'Foto de Perfil',
                clickToUpload: 'Haz clic para cargar o arrastra y suelta',
                name: 'Nombre:',
                saveChanges: 'Guardar Cambios',
                cancel: 'Cancelar',
                delete: 'Eliminar',
                startRecording: '¬°Comienza a registrar bebidas para ganar trofeos!'
            },
            fr: {
                login: 'Connexion',
                register: 'S\'inscrire',
                email: 'Email',
                password: 'Mot de passe',
                confirmPassword: 'Confirmer le mot de passe',
                loginSubmit: 'Connexion',
                registerSubmit: 'S\'inscrire',
                dontHaveAccount: 'Vous n\'avez pas de compte?',
                haveAccount: 'Vous avez d√©j√† un compte?',
                drinkTracker: 'Suivi des Boissons',
                subtitle: 'Enregistrez et suivez vos bouteilles d\'eau, verres et bi√®res',
                loggedInAs: 'Connect√© en tant que:',
                logout: 'D√©connexion',
                yourTrophies: 'Vos Troph√©es',
                waterBottles: 'Bouteilles d\'Eau',
                waterGlasses: 'Verres d\'Eau',
                beers: 'Bi√®res',
                registerDrink: 'Enregistrer Boisson',
                nameDescription: 'Nom/Description:',
                volume: 'Volume (ml):',
                time: 'Heure:',
                bottle: 'Bouteille',
                glass: 'Verre',
                beer: 'Bi√®re',
                options: 'Options',
                clearAllItems: 'Supprimer Tous les √âl√©ments',
                downloadData: 'T√©l√©charger les Donn√©es',
                autoSave: 'Sauvegarde automatique',
                autoSaveDesc: 'Tous les √©l√©ments sont automatiquement sauvegard√©s sur votre compte.',
                registeredItems: '√âl√©ments Enregistr√©s',
                noItems: 'Aucun √©l√©ment enregistr√© pour le moment. Commencez par ajouter une boisson ci-dessus!',
                editProfile: 'Modifier le Profil',
                editYourProfile: 'Modifiez Votre Profil',
                profilePicture: 'Photo de Profil',
                clickToUpload: 'Cliquez pour t√©l√©charger ou glissez-d√©posez',
                name: 'Nom:',
                saveChanges: 'Enregistrer les Modifications',
                cancel: 'Annuler',
                delete: 'Supprimer',
                startRecording: 'Commencez √† enregistrer des boissons pour gagner des troph√©es!'
            },
            de: {
                login: 'Anmelden',
                register: 'Registrieren',
                email: 'E-Mail',
                password: 'Passwort',
                confirmPassword: 'Passwort best√§tigen',
                loginSubmit: 'Anmelden',
                registerSubmit: 'Registrieren',
                dontHaveAccount: 'Haben Sie kein Konto?',
                haveAccount: 'Haben Sie bereits ein Konto?',
                drinkTracker: 'Getr√§nkeverfolgung',
                subtitle: 'Registriere und verfolge deine Wasserflaschen, Gl√§ser und Biere',
                loggedInAs: 'Angemeldet als:',
                logout: 'Abmelden',
                yourTrophies: 'Ihre Troph√§en',
                waterBottles: 'Wasserflaschen',
                waterGlasses: 'Wassergl√§ser',
                beers: 'Biere',
                registerDrink: 'Getr√§nk registrieren',
                nameDescription: 'Name/Beschreibung:',
                volume: 'Volumen (ml):',
                time: 'Zeit:',
                bottle: 'Flasche',
                glass: 'Glas',
                beer: 'Bier',
                options: 'Optionen',
                clearAllItems: 'Alle Elemente l√∂schen',
                downloadData: 'Daten herunterladen',
                autoSave: 'Automatisches Speichern',
                autoSaveDesc: 'Alle Elemente werden automatisch in Ihrem Konto gespeichert.',
                registeredItems: 'Registrierte Elemente',
                noItems: 'Noch keine Elemente registriert. Starten Sie mit dem Hinzuf√ºgen eines Getr√§nks!',
                editProfile: 'Profil bearbeiten',
                editYourProfile: 'Bearbeiten Sie Ihr Profil',
                profilePicture: 'Profilbild',
                clickToUpload: 'Klicken Sie zum Hochladen oder ziehen Sie per Drag & Drop',
                name: 'Name:',
                saveChanges: '√Ñnderungen speichern',
                cancel: 'Abbrechen',
                delete: 'L√∂schen',
                startRecording: 'Beginnen Sie mit der Registrierung von Getr√§nken, um Troph√§en zu gewinnen!'
            },
            pt: {
                login: 'Entrar',
                register: 'Registrar',
                email: 'Email',
                password: 'Senha',
                confirmPassword: 'Confirmar Senha',
                loginSubmit: 'Entrar',
                registerSubmit: 'Registrar',
                dontHaveAccount: 'N√£o tem uma conta?',
                haveAccount: 'J√° tem uma conta?',
                drinkTracker: 'Rastreador de Bebidas',
                subtitle: 'Registre e acompanhe suas garrafas de √°gua, copos e cervejas',
                loggedInAs: 'Conectado como:',
                logout: 'Sair',
                yourTrophies: 'Seus Trof√©us',
                waterBottles: 'Garrafas de √Ågua',
                waterGlasses: 'Copos de √Ågua',
                beers: 'Cervejas',
                registerDrink: 'Registrar Bebida',
                nameDescription: 'Nome/Descri√ß√£o:',
                volume: 'Volume (ml):',
                time: 'Hora:',
                bottle: 'Garrafa',
                glass: 'Copo',
                beer: 'Cerveja',
                options: 'Op√ß√µes',
                clearAllItems: 'Limpar Todos os Itens',
                downloadData: 'Baixar Dados',
                autoSave: 'Salvamento autom√°tico',
                autoSaveDesc: 'Todos os itens s√£o automaticamente salvos em sua conta.',
                registeredItems: 'Itens Registrados',
                noItems: 'Nenhum item registrado ainda. Comece adicionando uma bebida acima!',
                editProfile: 'Editar Perfil',
                editYourProfile: 'Edite Seu Perfil',
                profilePicture: 'Foto de Perfil',
                clickToUpload: 'Clique para fazer upload ou arraste e solte',
                name: 'Nome:',
                saveChanges: 'Salvar Altera√ß√µes',
                cancel: 'Cancelar',
                delete: 'Excluir',
                startRecording: 'Comece a registrar bebidas para ganhar trof√©us!'
            },
            it: {
                login: 'Accedi',
                register: 'Registrati',
                email: 'Email',
                password: 'Password',
                confirmPassword: 'Conferma Password',
                loginSubmit: 'Accedi',
                registerSubmit: 'Registrati',
                dontHaveAccount: 'Non hai un account?',
                haveAccount: 'Hai gi√† un account?',
                drinkTracker: 'Tracciatore Bevande',
                subtitle: 'Registra e monitora le tue bottiglie d\'acqua, bicchieri e birre',
                loggedInAs: 'Accesso come:',
                logout: 'Esci',
                yourTrophies: 'I Tuoi Trofei',
                waterBottles: 'Bottiglie d\'Acqua',
                waterGlasses: 'Bicchieri d\'Acqua',
                beers: 'Birre',
                registerDrink: 'Registra Bevanda',
                nameDescription: 'Nome/Descrizione:',
                volume: 'Volume (ml):',
                time: 'Ora:',
                bottle: 'Bottiglia',
                glass: 'Bicchiere',
                beer: 'Birra',
                options: 'Opzioni',
                clearAllItems: 'Cancella Tutti gli Elementi',
                downloadData: 'Scarica Dati',
                autoSave: 'Salvataggio automatico',
                autoSaveDesc: 'Tutti gli elementi vengono salvati automaticamente nel tuo account.',
                registeredItems: 'Elementi Registrati',
                noItems: 'Nessun elemento registrato ancora. Inizia aggiungendo una bevanda!',
                editProfile: 'Modifica Profilo',
                editYourProfile: 'Modifica Il Tuo Profilo',
                profilePicture: 'Foto Profilo',
                clickToUpload: 'Fai clic per caricare o trascina e rilascia',
                name: 'Nome:',
                saveChanges: 'Salva Modifiche',
                cancel: 'Annulla',
                delete: 'Elimina',
                startRecording: 'Inizia a registrare bevande per guadagnare trofei!'
            }
        };

        let currentLanguage = localStorage.getItem('selectedLanguage') || 'en';
        // Storage Keys
        const USERS_STORAGE_KEY = 'drinkTrackerUsers';
        const SESSION_STORAGE_KEY = 'drinkTrackerSession';

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            checkSession();
        });

        // ========== AUTHENTICATION FUNCTIONS ==========

        function toggleForms() {
            document.getElementById('loginForm').classList.toggle('hidden');
            document.getElementById('registerForm').classList.toggle('hidden');
            clearAuthMessages();
        }

        function handleRegister() {
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirm = document.getElementById('registerConfirm').value;

            const errorEl = document.getElementById('registerError');
            const successEl = document.getElementById('registerSuccess');
            errorEl.style.display = 'none';
            successEl.style.display = 'none';

            // Validation
            if (!email) {
                showError(errorEl, 'Please enter an email');
                return;
            }

            if (!isValidEmail(email)) {
                showError(errorEl, 'Please enter a valid email');
                return;
            }

            if (!password) {
                showError(errorEl, 'Please enter a password');
                return;
            }

            if (password.length < 6) {
                showError(errorEl, 'Password must be at least 6 characters');
                return;
            }

            if (password !== confirm) {
                showError(errorEl, 'Passwords do not match');
                return;
            }

            // Check if email already exists
            const users = getAllUsers();
            if (users.some(u => u.email.toLowerCase() === email.toLowerCase())) {
                showError(errorEl, 'Email already registered');
                return;
            }

            // Create new user
            const newUser = {
                email: email,
                password: hashPassword(password),
                createdAt: new Date().toISOString(),
                name: '',
                profilePicture: '',
                items: []
            };

            users.push(newUser);
            localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify(users));

            showSuccess(successEl, 'Account created successfully! You can now login.');
            
            setTimeout(() => {
                toggleForms();
                clearAuthMessages();
            }, 2000);
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            const errorEl = document.getElementById('loginError');
            errorEl.style.display = 'none';

            if (!email || !password) {
                showError(errorEl, 'Please enter email and password');
                return;
            }

            const users = getAllUsers();
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());

            if (!user) {
                showError(errorEl, 'Email not found');
                return;
            }

            if (user.password !== hashPassword(password)) {
                showError(errorEl, 'Incorrect password');
                return;
            }

            // Create session
            const session = {
                email: user.email,
                loginTime: new Date().toISOString()
            };
            localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(session));

            // Show app
            showApp();
        }

        function handleLogout() {
            localStorage.removeItem(SESSION_STORAGE_KEY);
            showAuth();
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirm').value = '';
            clearAuthMessages();
        }

        function checkSession() {
            const session = JSON.parse(localStorage.getItem(SESSION_STORAGE_KEY) || 'null');
            if (session && session.email) {
                showApp();
            } else {
                showAuth();
            }
        }

        function showAuth() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('appSection').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            const session = JSON.parse(localStorage.getItem(SESSION_STORAGE_KEY));
            document.getElementById('currentUserEmail').textContent = session.email;
            setCurrentTime();
            updateProfileDisplay();
            loadItems();
            displayAchievements();
        }

        // ========== UTILITY FUNCTIONS ==========

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function hashPassword(password) {
            // Simple hash (NOT secure for production - for demo purposes only)
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return 'hash_' + Math.abs(hash).toString(36);
        }

        function showError(element, message) {
            element.textContent = message;
            element.style.display = 'block';
        }

        function showSuccess(element, message) {
            element.textContent = message;
            element.style.display = 'block';
        }

        function clearAuthMessages() {
            document.getElementById('loginError').style.display = 'none';
            document.getElementById('registerError').style.display = 'none';
            document.getElementById('registerSuccess').style.display = 'none';
        }

        function getCurrentUser() {
            const session = JSON.parse(localStorage.getItem(SESSION_STORAGE_KEY));
            return session ? session.email : null;
        }

        function getAllUsers() {
            const stored = localStorage.getItem(USERS_STORAGE_KEY);
            return stored ? JSON.parse(stored) : [];
        }

        function getCurrentUserData() {
            const users = getAllUsers();
            const currentEmail = getCurrentUser();
            return users.find(u => u.email.toLowerCase() === currentEmail.toLowerCase());
        }

        function saveUserData(userData) {
            const users = getAllUsers();
            const index = users.findIndex(u => u.email.toLowerCase() === userData.email.toLowerCase());
            if (index !== -1) {
                users[index] = userData;
                localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify(users));
            }
        }

        // ========== DRINK TRACKER FUNCTIONS ==========

        function setCurrentTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
            document.getElementById('drinkTime').value = `${hours}:${minutes} ${ampm}`;
        }

        function addDrink(type) {
            const name = document.getElementById('drinkName').value.trim();
            const volume = document.getElementById('drinkVolume').value;
            const time = document.getElementById('drinkTime').value;

            if (!name) {
                alert('Please enter a name/description');
                return;
            }

            const userData = getCurrentUserData();
            const oldAchievements = getAchievements();
            
            const newItem = {
                id: Date.now(),
                type: type,
                name: name,
                volume: volume || '-',
                time: time || new Date().toLocaleTimeString(),
                timestamp: new Date().toISOString()
            };

            userData.items.push(newItem);
            saveUserData(userData);

            // Check for new achievements
            const newAchievements = getAchievements();
            checkNewAchievements(oldAchievements, newAchievements);

            // Clear form
            document.getElementById('drinkName').value = '';
            document.getElementById('drinkVolume').value = '';
            setCurrentTime();

            loadItems();
        }

        function deleteItem(id) {
            const userData = getCurrentUserData();
            userData.items = userData.items.filter(item => item.id !== id);
            saveUserData(userData);
            loadItems();
        }

        function clearAll() {
            if (confirm('Are you sure you want to delete all items? This cannot be undone.')) {
                const userData = getCurrentUserData();
                userData.items = [];
                saveUserData(userData);
                loadItems();
            }
        }

        function loadItems() {
            const userData = getCurrentUserData();
            const items = userData.items || [];
            const container = document.getElementById('itemsList');

            // Update stats
            const bottles = items.filter(i => i.type === 'water-bottle').length;
            const glasses = items.filter(i => i.type === 'water-glass').length;
            const beers = items.filter(i => i.type === 'beer').length;

            document.getElementById('bottleCount').textContent = bottles;
            document.getElementById('glassCount').textContent = glasses;
            document.getElementById('beerCount').textContent = beers;

            // Display achievements
            displayAchievements();

            // Clear and populate list
            if (items.length === 0) {
                container.innerHTML = '<div class="empty-message">No items registered yet. Start by adding a drink above!</div>';
                return;
            }

            container.innerHTML = items.map(item => {
                const typeEmoji = {
                    'water-bottle': 'üíß',
                    'water-glass': 'ü•õ',
                    'beer': 'üç∫'
                }[item.type];

                const typeLabel = {
                    'water-bottle': 'Water Bottle',
                    'water-glass': 'Water Glass',
                    'beer': 'Beer'
                }[item.type];

                return `
                    <div class="item ${item.type}">
                        <div class="item-info">
                            <div class="item-type">${typeEmoji} ${typeLabel}</div>
                            <div class="item-details">
                                <strong>${item.name}</strong><br>
                                Volume: ${item.volume} ml | Time: ${item.time}
                            </div>
                        </div>
                        <button class="item-delete" onclick="deleteItem(${item.id})">Delete</button>
                    </div>
                `;
            }).join('');
        }

        function downloadData() {
            const userData = getCurrentUserData();
            const dataStr = JSON.stringify(userData.items, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `drink-tracker-${userData.email.split('@')[0]}-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // ========== PROFILE FUNCTIONS ==========

        function openProfileModal() {
            const userData = getCurrentUserData();
            document.getElementById('profileNameInput').value = userData.name || '';
            
            // Set preview avatar
            if (userData.profilePicture) {
                document.getElementById('profilePreview').src = userData.profilePicture;
            } else {
                document.getElementById('profilePreview').src = '';
                document.getElementById('profilePreview').textContent = 'üë§';
            }

            document.getElementById('profileModal').classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
            document.getElementById('profilePictureInput').value = '';
        }

        function saveProfile() {
            const userData = getCurrentUserData();
            const newName = document.getElementById('profileNameInput').value.trim();
            
            if (!newName) {
                alert('Please enter a name');
                return;
            }

            userData.name = newName;

            // Handle profile picture
            const fileInput = document.getElementById('profilePictureInput');
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    userData.profilePicture = e.target.result;
                    saveUserData(userData);
                    updateProfileDisplay();
                    closeProfileModal();
                };
                reader.readAsDataURL(fileInput.files[0]);
            } else {
                saveUserData(userData);
                updateProfileDisplay();
                closeProfileModal();
            }
        }

        function updateProfileDisplay() {
            const userData = getCurrentUserData();
            
            // Update header avatar
            const headerAvatar = document.getElementById('headerAvatar');
            if (userData.profilePicture) {
                headerAvatar.src = userData.profilePicture;
                headerAvatar.style.fontSize = '0';
            } else {
                headerAvatar.src = '';
                headerAvatar.textContent = 'üë§';
                headerAvatar.style.fontSize = '1.5em';
            }

            // Update profile section
            const profileAvatar = document.getElementById('profileAvatar');
            if (userData.profilePicture) {
                profileAvatar.src = userData.profilePicture;
                profileAvatar.style.fontSize = '0';
            } else {
                profileAvatar.src = '';
                profileAvatar.textContent = 'üë§';
                profileAvatar.style.fontSize = '3em';
            }

            document.getElementById('profileName').textContent = userData.name || 'User';
            document.getElementById('profileUserEmail').textContent = userData.email;
            document.getElementById('currentUserEmail').textContent = userData.email;
        }

        // Update initial profile display
        window.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('appSection').classList.contains('hidden') === false) {
                updateProfileDisplay();
            }
            initializeMusic();
        });

        // ========== ACHIEVEMENTS FUNCTIONS ==========

        function getAchievements() {
            const userData = getCurrentUserData();
            const items = userData.items || [];
            const bottles = items.filter(i => i.type === 'water-bottle').length;
            const glasses = items.filter(i => i.type === 'water-glass').length;

            return {
                bottleTrophies: Math.floor(bottles / 10),
                glassTrophies: Math.floor(glasses / 50),
                bottleProgress: bottles % 10,
                glassProgress: glasses % 50,
                totalBottles: bottles,
                totalGlasses: glasses
            };
        }

        function displayAchievements() {
            const achievements = getAchievements();
            const container = document.getElementById('trophiesContainer');

            const trophies = [
                {
                    id: 'bottles',
                    emoji: 'üíß',
                    name: '10 Water Bottles',
                    count: achievements.bottleTrophies,
                    progress: achievements.bottleProgress,
                    requirement: 10,
                    total: achievements.totalBottles
                },
                {
                    id: 'glasses',
                    emoji: 'ü•õ',
                    name: '50 Water Glasses',
                    count: achievements.glassTrophies,
                    progress: achievements.glassProgress,
                    requirement: 50,
                    total: achievements.totalGlasses
                }
            ];

            if (achievements.bottleTrophies === 0 && achievements.glassTrophies === 0) {
                container.innerHTML = '<div class="no-achievements">Start recording drinks to earn trophies!</div>';
                return;
            }

            container.innerHTML = trophies.map(trophy => {
                const isEarned = trophy.count > 0;
                const trophyCount = trophy.count;
                
                return `
                    <div class="trophy-item ${isEarned ? 'earned' : 'locked'}">
                        <div class="trophy-emoji">${isEarned ? 'üèÜ' : trophy.emoji}</div>
                        <div class="trophy-name">${trophy.name}</div>
                        <div class="trophy-progress">
                            ${isEarned ? `<strong>x${trophyCount}</strong>` : `${trophy.total}/${trophy.requirement}`}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showTrophyNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'trophy-notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function checkNewAchievements(oldAchievements, newAchievements) {
            if (newAchievements.bottleTrophies > oldAchievements.bottleTrophies) {
                const count = newAchievements.bottleTrophies;
                showTrophyNotification(`üèÜ Congratulations! You earned a water bottle trophy (${count})`);
            }
            
            if (newAchievements.glassTrophies > oldAchievements.glassTrophies) {
                const count = newAchievements.glassTrophies;
                showTrophyNotification(`üèÜ Congratulations! You earned a water glass trophy (${count})`);
            }

            // Check for every 20 bottles milestone
            if (newAchievements.totalBottles % 20 === 0 && newAchievements.totalBottles > 0) {
                const beerMessages = [
                    'üç∫ You can have a beer now',
                    'üç∫ A beer sounds good right now',
                    'üç∫ Earned yourself a cold one',
                    'üç∫ Time for a beer break',
                    'üç∫ You deserve a beer'
                ];
                const randomMessage = beerMessages[Math.floor(Math.random() * beerMessages.length)];
                showCasualNotification(randomMessage);
            }

            // Check for every 50 glasses milestone
            if (newAchievements.totalGlasses % 50 === 0 && newAchievements.totalGlasses > 0) {
                const beerMessages = [
                    'üç∫ You can have a beer now',
                    'üç∫ A beer sounds good right now',
                    'üç∫ Earned yourself a cold one',
                    'üç∫ Time for a beer break',
                    'üç∫ You deserve a beer'
                ];
                const randomMessage = beerMessages[Math.floor(Math.random() * beerMessages.length)];
                showCasualNotification(randomMessage);
            }
        }

        function showCasualNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'trophy-notification';
            notification.style.background = 'linear-gradient(135deg, #f39c12, #e67e22)';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ========== MUSIC FUNCTIONS ==========

        function initializeMusic() {
            const audio = document.getElementById('backgroundMusic');
            const musicToggle = document.getElementById('musicToggle');
            
            // Set initial volume to 30%
            audio.volume = 0.3;
            
            // Load music preference from localStorage
            const isMusicEnabled = localStorage.getItem('musicEnabled') !== 'false';
            
            if (isMusicEnabled && document.getElementById('appSection').classList.contains('hidden') === false) {
                playMusic();
            }
            
            // Update button state when music plays/pauses
            audio.addEventListener('play', () => {
                if (musicToggle) musicToggle.classList.add('playing');
            });
            
            audio.addEventListener('pause', () => {
                if (musicToggle) musicToggle.classList.remove('playing');
            });
        }

        function toggleMusic() {
            const audio = document.getElementById('backgroundMusic');
            const musicToggle = document.getElementById('musicToggle');
            
            if (audio.paused) {
                playMusic();
            } else {
                pauseMusic();
            }
        }

        function playMusic() {
            const audio = document.getElementById('backgroundMusic');
            audio.play().catch(() => {
                // Autoplay may be blocked by browser
            });
            localStorage.setItem('musicEnabled', 'true');
        }

        function pauseMusic() {
            const audio = document.getElementById('backgroundMusic');
            audio.pause();
            localStorage.setItem('musicEnabled', 'false');
        }

        // ========== LANGUAGE FUNCTIONS ==========

        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }

        function initializeLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            const languages = ['en', 'es', 'fr', 'de', 'pt', 'it'];
            const languageNames = {
                en: 'English',
                es: 'Espa√±ol',
                fr: 'Fran√ßais',
                de: 'Deutsch',
                pt: 'Portugu√™s',
                it: 'Italiano'
            };

            dropdown.innerHTML = languages.map(lang => `
                <button onclick="changeLanguage('${lang}')" class="language-btn ${currentLanguage === lang ? 'active' : ''}">
                    ${languageNames[lang]}
                </button>
            `).join('');
        }

        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.classList.toggle('active');
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('selectedLanguage', lang);
            updatePageLanguage();
            initializeLanguageDropdown();
            document.getElementById('languageDropdown').classList.remove('active');
        }

        function updatePageLanguage() {
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (el.tagName === 'INPUT' && el.type === 'text' || el.type === 'password' || el.type === 'email') {
                    el.placeholder = t(key);
                } else {
                    el.textContent = t(key);
                }
            });

            // Update specific elements that are dynamically generated
            const emptyMessage = document.querySelector('.empty-message');
            if (emptyMessage) {
                emptyMessage.textContent = t('noItems');
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            currentLanguage = localStorage.getItem('selectedLanguage') || 'en';
            initializeLanguageDropdown();
            updatePageLanguage();
            if (document.getElementById('appSection').classList.contains('hidden') === false) {
                updateProfileDisplay();
            }
            initializeMusic();
        });
    </script>
</body>
</html>
